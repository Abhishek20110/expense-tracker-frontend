(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{61583:(e,t,r)=>{Promise.resolve().then(r.bind(r,91612))},76046:(e,t,r)=>{"use strict";var a=r(66658);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},91612:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(95155),s=r(12115),l=r(82651),i=r(76046);let o=()=>{let[e,t]=(0,s.useState)(null),[r,o]=(0,s.useState)(null),[u,n]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),[p,m]=(0,s.useState)(null),[h,f]=(0,s.useState)(!0),g="http://localhost:8080",x=(0,i.useRouter)();(0,s.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token");if(!e){d("Authorization token is missing"),x.push("/login");return}let t=(await l.A.get("".concat(g,"/api/users/users/mydetails"),{headers:{Authorization:"Bearer ".concat(e)}})).data.data;n(t.profilePicture||"https://res.cloudinary.com/dmdsoq8cj/image/upload/v1726251247/todo/uploads/profile_picture/jbhzs6zunn0n86xkgjwv.jpg"),o(t.profilePicture||"https://res.cloudinary.com/dmdsoq8cj/image/upload/v1726251247/todo/uploads/profile_picture/jbhzs6zunn0n86xkgjwv.jpg"),f(!1)}catch(e){d("Failed to fetch user data"),f(!1)}})()},[g,x]);let b=async t=>{if(t.preventDefault(),d(null),m(null),!e){d("No file selected");return}try{let t=localStorage.getItem("token");if(!t){d("Authorization token is missing"),x.push("/login");return}let r=new FormData;r.append("profile_picture",e);let a=await l.A.post("".concat(g,"/api/users/update-profile-picture"),r,{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"multipart/form-data"}});200===a.status&&(m("Profile picture updated successfully!"),o(a.data.profilePicture))}catch(e){d("Failed to update profile picture")}};return h?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsx)("div",{className:"flex justify-center items-center h-screen w-full bg-gradient-to-r from-pink-100 via-purple-100 to-indigo-100",children:(0,a.jsxs)("div",{className:"max-w-xl w-full p-6 bg-white rounded-xl shadow-lg",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-center mb-8 text-purple-900",children:"Change Profile Picture"}),p&&(0,a.jsx)("div",{className:"text-green-600 text-center mb-4",children:p}),c&&(0,a.jsx)("div",{className:"text-red-600 text-center mb-4",children:c}),(0,a.jsxs)("form",{onSubmit:b,className:"text-center",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("img",{src:r||u||void 0,alt:"Profile",className:"w-32 h-32 object-cover rounded-full mx-auto border-2 border-gray-300"})}),(0,a.jsx)("input",{type:"file",onChange:e=>{if(e.target.files&&e.target.files[0]){let r=e.target.files[0];t(r),o(URL.createObjectURL(r))}},className:"block mx-auto mb-4"})]}),(0,a.jsx)("button",{type:"submit",className:"px-6 py-3 text-white bg-gradient-to-r from-green-400 to-blue-500 rounded-full hover:from-green-500 hover:to-blue-600 transition duration-300",children:"Update Profile Picture"})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[651,441,517,358],()=>t(61583)),_N_E=e.O()}]);