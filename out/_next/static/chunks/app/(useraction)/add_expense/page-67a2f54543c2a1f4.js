(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[924],{70410:(e,t,l)=>{Promise.resolve().then(l.bind(l,62521))},62521:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>d});var a=l(95155),r=l(12115),s=l(82651),o=l(76046),n=l(40842),i=l.n(n);l(35279);let d=()=>{let[e,t]=(0,r.useState)(""),[l,n]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),[u,x]=(0,r.useState)(""),[g,m]=(0,r.useState)(null),[b,h]=(0,r.useState)([]),[p,f]=(0,r.useState)(null),[v,y]=(0,r.useState)(!1),[j,N]=(0,r.useState)(null),w="http://localhost:8080",S=(0,o.useRouter)();(0,r.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token");if(!e){f("Authorization token is missing"),S.push("/login");return}y(!0);let t=await s.A.get("".concat(w,"/api/categories/my_categories"),{headers:{Authorization:"Bearer ".concat(e)}});200===t.status?h(t.data.data.categories||[]):f("Failed to fetch categories")}catch(e){f("An error occurred while fetching categories")}finally{y(!1)}})()},[w,S]);let k=async a=>{a.preventDefault(),f(null),N(null);try{let a=localStorage.getItem("token");if(!a){f("Authorization token is missing"),S.push("/login");return}let r=await s.A.post("".concat(w,"/api/expenses/add"),{title:e,amount:l,category:d,note:u,date:g?g.toISOString().split("T")[0]:""},{headers:{Authorization:"Bearer ".concat(a)}});200===r.status?(N("Expense added successfully!"),t(""),n(""),c(""),x(""),m(null)):f("Failed to add expense")}catch(e){f("An error occurred while adding the expense")}};return v?(0,a.jsx)("div",{children:"Loading..."}):p?(0,a.jsx)("div",{className:"text-red-500 text-center",children:p}):(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen w-full bg-gradient-to-r from-pink-100 via-purple-100 to-indigo-100",children:(0,a.jsxs)("div",{className:"w-full p-8 bg-gradient-to-r from-pink-100 via-purple-100 to-indigo-100 rounded-xl shadow-lg overflow-y-auto my-10",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-center mb-8 text-purple-900",children:"Add Expense"}),j&&(0,a.jsx)("div",{className:"text-green-600 text-center mb-4",children:j}),p&&(0,a.jsx)("div",{className:"text-red-600 text-center mb-4",children:p}),(0,a.jsxs)("form",{onSubmit:k,children:[(0,a.jsxs)("div",{className:"mb-6 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("label",{className:"block text-lg font-semibold text-indigo-800 mb-2",children:"Name"}),(0,a.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("label",{className:"block text-lg font-semibold text-indigo-800 mb-2",children:"Amount"}),(0,a.jsx)("input",{type:"text",value:l,onChange:e=>n(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("label",{className:"block text-lg font-semibold text-indigo-800 mb-2",children:"Category"}),(0,a.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Select a category"}),b.map(e=>(0,a.jsx)("option",{value:e._id,children:e.name},e._id))]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-lg font-semibold text-indigo-800 mb-2",children:"Note"}),(0,a.jsx)("textarea",{value:u,onChange:e=>x(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,rows:5,placeholder:"Enter a note for this expense..."})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-lg font-semibold text-indigo-800 mb-2",children:"Date"}),(0,a.jsx)(i(),{selected:g,onChange:e=>m(e),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,dateFormat:"yyyy-MM-dd",placeholderText:"Select a date"})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("button",{type:"submit",className:"px-6 py-3 text-white bg-gradient-to-r from-green-400 to-blue-500 rounded-full ".concat(v?"opacity-50 cursor-not-allowed":"hover:from-green-500 hover:to-blue-600 transition duration-300"),disabled:v,children:v?"Submitting...":"Add Expense"})})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[302,915,651,621,441,517,358],()=>t(70410)),_N_E=e.O()}]);