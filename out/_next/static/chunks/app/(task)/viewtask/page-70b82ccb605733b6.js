(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[812],{84816:(e,t,r)=>{Promise.resolve().then(r.bind(r,56035))},76046:(e,t,r)=>{"use strict";var s=r(66658);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},56035:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(95155),a=r(12115),l=r(82651),o=r(76046);let n={Pending:"bg-yellow-500","In Progress":"bg-blue-500",Completed:"bg-green-500"},d=()=>{let[e,t]=(0,a.useState)([]),[r,d]=(0,a.useState)([]),[c,i]=(0,a.useState)(null),[u,h]=(0,a.useState)(null),[x,p]=(0,a.useState)(""),[b,m]=(0,a.useState)("title"),[g,y]=(0,a.useState)("asc"),j=(0,o.useRouter)(),f="http://localhost:8080";(0,a.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token");if(!e){i("Authorization token is missing"),j.push("/login");return}let r=(await l.A.get("".concat(f,"/api/tasks/mytasks"),{headers:{Authorization:"Bearer ".concat(e)}})).data.data;t(r),d(r),h("Tasks fetched successfully!")}catch(e){console.error(e),i("Failed to fetch tasks")}})()},[f,j]),(0,a.useEffect)(()=>{(()=>{let t=e.filter(e=>e.title.toLowerCase().includes(x.toLowerCase())||e.description.toLowerCase().includes(x.toLowerCase()));t.sort((e,t)=>{let r=e[b],s=t[b];return r<s?"asc"===g?-1:1:r>s?"asc"===g?1:-1:0}),d(t)})()},[x,b,g,e]);let N=e=>{console.log("View task with ID: ".concat(e)),j.push("/viewtask/".concat(e))},v=async r=>{try{console.log(r);let s=localStorage.getItem("token");if(!s){i("Authorization token is missing"),j.push("/login");return}await l.A.delete("".concat(f,"/api/tasks/task/").concat(r),{headers:{Authorization:"Bearer ".concat(s)}}),t(e.filter(e=>e._id!==r)),h("Task deleted successfully!")}catch(e){console.error(e),i("Failed to delete task")}},k=async(r,s)=>{try{let a=localStorage.getItem("token");if(!a){i("Authorization token is missing"),j.push("/login");return}await l.A.patch("".concat(f,"/api/tasks/task/status/").concat(r),{status:s},{headers:{Authorization:"Bearer ".concat(a)}}),t(e.map(e=>e._id===r?{...e,status:s}:e)),h("Task status updated successfully!")}catch(e){console.error(e),i("Failed to update task status")}};return(0,s.jsxs)("div",{className:"relative w-full px-6 py-10 bg-gradient-to-r from-pink-100 via-purple-100 to-indigo-100 rounded-xl shadow-lg mx-auto",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 mt-4 mr-4",children:(0,s.jsx)("button",{onClick:()=>{window.open("/addtask","_blank")},className:"px-6 py-3 text-white bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full hover:from-yellow-500 hover:to-orange-600 transition-transform transform hover:scale-105 duration-300 shadow-md",children:"Add Tasks"})}),(0,s.jsx)("h1",{className:"text-4xl font-bold text-center mb-8 text-purple-900",children:"My Tasks"}),u&&(0,s.jsx)("div",{className:"text-green-600 text-center mb-4",children:u}),c&&(0,s.jsx)("div",{className:"text-red-600 text-center mb-4",children:c}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("input",{type:"text",placeholder:"Search tasks...",value:x,onChange:e=>p(e.target.value),className:"px-4 py-2 border border-gray-300 rounded w-full"})}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"mr-2",children:"Sort By:"}),(0,s.jsxs)("select",{value:b,onChange:e=>m(e.target.value),className:"px-4 py-2 border border-gray-300 rounded",children:[(0,s.jsx)("option",{value:"title",children:"Title"}),(0,s.jsx)("option",{value:"dueDate",children:"Due Date"}),(0,s.jsx)("option",{value:"status",children:"Status"})]}),(0,s.jsx)("label",{className:"ml-4 mr-2",children:"Order:"}),(0,s.jsxs)("select",{value:g,onChange:e=>y(e.target.value),className:"px-4 py-2 border border-gray-300 rounded",children:[(0,s.jsx)("option",{value:"asc",children:"Ascending"}),(0,s.jsx)("option",{value:"desc",children:"Descending"})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full bg-white border border-gray-300 rounded-lg shadow-md",children:[(0,s.jsx)("thead",{className:"bg-purple-800 text-white",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"py-3 px-4 border-b border-gray-200 text-left",children:"Sl"}),(0,s.jsx)("th",{className:"py-3 px-4 border-b border-gray-200 text-left",children:"Title"}),(0,s.jsx)("th",{className:"py-3 px-4 border-b border-gray-200 text-left",children:"Description"}),(0,s.jsx)("th",{className:"py-3 px-4 border-b border-gray-200 text-left",children:"Due Date"}),(0,s.jsx)("th",{className:"py-3 px-4 border-b border-gray-200 text-left",children:"Status"}),(0,s.jsx)("th",{className:"py-3 px-4 border-b border-gray-200 text-left",children:"Comments"}),(0,s.jsx)("th",{className:"py-3 px-4 border-b border-gray-200 text-left",children:"Action"})]})}),(0,s.jsx)("tbody",{children:r.length>0?r.map((e,t)=>(0,s.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,s.jsx)("td",{className:"py-3 px-4 border-b border-gray-200 text-left",children:t+1}),(0,s.jsx)("td",{className:"py-3 px-4 border-b border-gray-200 text-left",children:e.title}),(0,s.jsx)("td",{className:"py-3 px-4 border-b border-gray-200 text-left",children:e.description}),(0,s.jsx)("td",{className:"py-3 px-4 border-b border-gray-200 text-left",children:new Date(e.dueDate).toLocaleDateString()}),(0,s.jsx)("td",{className:"py-3 px-4 border-b border-gray-200 text-left",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-white ".concat(n[e.status]),children:e.status})}),(0,s.jsx)("td",{className:"py-3 px-4 border-b border-gray-200 text-left",children:(0,s.jsx)("p",{className:"text-gray-700",children:e.comments||"No comments"})}),(0,s.jsxs)("td",{className:"py-3 px-4 border-b border-gray-200 text-left",children:[(0,s.jsx)("button",{onClick:()=>N(e._id),className:"px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-600 mr-2",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>v(e._id),className:"px-4 py-2 text-white bg-red-500 rounded hover:bg-red-600 mr-2",children:"Delete"}),(0,s.jsxs)("select",{value:e.status,onChange:t=>k(e._id,t.target.value),className:"px-4 py-2 border border-gray-300 rounded",children:[(0,s.jsx)("option",{value:"Pending",children:"Pending"}),(0,s.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,s.jsx)("option",{value:"Completed",children:"Completed"})]})]})]},e._id)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:7,className:"py-3 px-4 text-center text-gray-600",children:"No tasks available"})})})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[651,441,517,358],()=>t(84816)),_N_E=e.O()}]);